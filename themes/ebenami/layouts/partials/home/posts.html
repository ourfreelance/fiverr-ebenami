<section id="posts" class="mt-10">
  
  {{ partial "components/section-title.html" (dict 
    "title" .title
    "description" .description
  )}}

  
  {{ if .posts }}
  <div class="post-container grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-10">
    
    {{ range .posts }}
      <article class="post-card bg-white rounded-lg p-3 md:p-5">
        {{ with .Resources.GetMatch "thumbnail.png" }}
          <img class="mb-6" src="{{ .RelPermalink }}">
        {{ end }}
        <div class="space-y-5">
          <h2 class="text-2xl md:text-3xl font-bold text-primary-dark-gray">
          {{ .Params.Title }}
          </h2>
          <div class="flex items-center gap-2 md:gap-4 text-sm md:text-base flex-wrap"> 
            <div class="flex items-center gap-1 md:gap-2 font-medium text-primary">
              <img class="-mt-0.5" src="/assets/images/date.svg" alt="">
              {{ dateFormat "02 Jan, 2006" .Date.Local }}
            </div>
            <div class="flex items-center gap-1 md:gap-2 font-medium text-primary">
              <img class="-mt-0.5" src="/assets/images/folder.svg" alt="">
              {{ .Params.Category }}
            </div>
          </div>
          <p class="text-sm md:text-base font-medium line-clamp-2 text-primary-gray">
            {{ if isset .Params "description" }}
              {{ .Params.Description }}
            {{ else }}
              {{ .Summary }}
            {{ end }}
          </p>
        </div>
        <div class="flex mt-8">
          <a href="{{ .RelPermalink }}" class="font-roboto block py-4 px-8 w-full md:w-auto text-center rounded-lg bg-primary text-white text-sm md:text-base font-medium hover:opacity-90 transition">
            Read More
          </a>
        </div>
      </article>
    {{end}}
  </div>

  <div class="mt-16 :mt-24 flex justify-center w-full">
    {{- if .paginator.HasNext -}}
      <a href="{{ .paginator.Next.URL }}" class="post-load-more font-roboto block py-4 px-8 rounded-lg bg-primary text-white font-medium hover:opacity-90 transition">
        Load More
      </a>
    {{- end -}}

    
  </div>

  {{ else}}
    <div class="text-primary-gray/70 font-medium text-lg">
      Post not found.
    </div>
  {{ end }}

</section>

{{ define "scripts" }}

<script src="https://unpkg.com/infinite-scroll@4/dist/infinite-scroll.pkgd.min.js"></script>
  <script>

    const postContainer = document.querySelector('.post-container');

    const options = {
      path: '.post-load-more',
      append: '.post-card',
      loadOnScroll: false,
      button: '.post-load-more',
      history: null
    };

    const infScroll = new InfiniteScroll(postContainer, options);
  </script>
{{ end }}